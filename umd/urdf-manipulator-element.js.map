{"version":3,"file":"urdf-manipulator-element.js","sources":["../src/URDFDragControls.js","../src/urdf-manipulator-element.js"],"sourcesContent":["import { Raycaster, Vector3, Plane, Vector2 } from 'three';\n\n// Find the nearest parent that is a joint\nfunction isJoint(j) {\n\n    return j.isURDFJoint && j.jointType !== 'fixed';\n\n};\n\nfunction findNearestJoint(child) {\n\n    let curr = child;\n    while (curr) {\n\n        if (isJoint(curr)) {\n\n            return curr;\n\n        }\n\n        curr = curr.parent;\n\n    }\n\n    return curr;\n\n};\n\nconst prevHitPoint = new Vector3();\nconst newHitPoint = new Vector3();\nconst pivotPoint = new Vector3();\nconst tempVector = new Vector3();\nconst tempVector2 = new Vector3();\nconst projectedStartPoint = new Vector3();\nconst projectedEndPoint = new Vector3();\nconst plane = new Plane();\nexport class URDFDragControls {\n\n    constructor(scene) {\n\n        this.enabled = true;\n        this.scene = scene;\n        this.raycaster = new Raycaster();\n        this.initialGrabPoint = new Vector3();\n\n        this.hitDistance = -1;\n        this.hovered = null;\n        this.manipulating = null;\n\n    }\n\n    update() {\n\n        const {\n            raycaster,\n            hovered,\n            manipulating,\n            scene,\n        } = this;\n\n        if (manipulating) {\n\n            return;\n\n        }\n\n        let hoveredJoint = null;\n        const intersections = raycaster.intersectObject(scene, true);\n        if (intersections.length !== 0) {\n\n            const hit = intersections[0];\n            this.hitDistance = hit.distance;\n            hoveredJoint = findNearestJoint(hit.object);\n            this.initialGrabPoint.copy(hit.point);\n\n        }\n\n        if (hoveredJoint !== hovered) {\n\n            if (hovered) {\n\n                this.onUnhover(hovered);\n\n            }\n\n            this.hovered = hoveredJoint;\n\n            if (hoveredJoint) {\n\n                this.onHover(hoveredJoint);\n\n            }\n\n        }\n\n    }\n\n    updateJoint(joint, angle) {\n\n        joint.setJointValue(angle);\n\n    }\n\n    onDragStart(joint) {\n\n    }\n\n    onDragEnd(joint) {\n\n    }\n\n    onHover(joint) {\n\n    }\n\n    onUnhover(joint) {\n\n    }\n\n    getRevoluteDelta(joint, startPoint, endPoint) {\n\n        // set up the plane\n        tempVector\n            .copy(joint.axis)\n            .transformDirection(joint.matrixWorld)\n            .normalize();\n        pivotPoint\n            .set(0, 0, 0)\n            .applyMatrix4(joint.matrixWorld);\n        plane\n            .setFromNormalAndCoplanarPoint(tempVector, pivotPoint);\n\n        // project the drag points onto the plane\n        plane.projectPoint(startPoint, projectedStartPoint);\n        plane.projectPoint(endPoint, projectedEndPoint);\n\n        // get the directions relative to the pivot\n        projectedStartPoint.sub(pivotPoint);\n        projectedEndPoint.sub(pivotPoint);\n\n        tempVector.crossVectors(projectedStartPoint, projectedEndPoint);\n\n        const direction = Math.sign(tempVector.dot(plane.normal));\n        return direction * projectedEndPoint.angleTo(projectedStartPoint);\n\n    }\n\n    getPrismaticDelta(joint, startPoint, endPoint) {\n\n        tempVector.subVectors(endPoint, startPoint);\n        plane\n            .normal\n            .copy(joint.axis)\n            .transformDirection(joint.parent.matrixWorld)\n            .normalize();\n\n        return tempVector.dot(plane.normal);\n\n    }\n\n    moveRay(toRay) {\n\n        const { raycaster, hitDistance, manipulating } = this;\n        const { ray } = raycaster;\n\n        if (manipulating) {\n\n            ray.at(hitDistance, prevHitPoint);\n            toRay.at(hitDistance, newHitPoint);\n\n            let delta = 0;\n            if (manipulating.jointType === 'revolute' || manipulating.jointType === 'continuous') {\n\n                delta = this.getRevoluteDelta(manipulating, prevHitPoint, newHitPoint);\n\n            } else if (manipulating.jointType === 'prismatic') {\n\n                delta = this.getPrismaticDelta(manipulating, prevHitPoint, newHitPoint);\n\n            }\n\n            if (delta) {\n\n                this.updateJoint(manipulating, manipulating.angle + delta);\n\n            }\n\n        }\n\n        this.raycaster.ray.copy(toRay);\n        this.update();\n\n    }\n\n    setGrabbed(grabbed) {\n\n        const { hovered, manipulating } = this;\n\n        if (grabbed) {\n\n            if (manipulating !== null || hovered === null) {\n\n                return;\n\n            }\n\n            this.manipulating = hovered;\n            this.onDragStart(hovered);\n\n        } else {\n\n            if (this.manipulating === null) {\n                return;\n            }\n\n            this.onDragEnd(this.manipulating);\n            this.manipulating = null;\n            this.update();\n\n        }\n\n    }\n\n}\n\nexport class PointerURDFDragControls extends URDFDragControls {\n\n    constructor(scene, camera, domElement) {\n\n        super(scene);\n        this.camera = camera;\n        this.domElement = domElement;\n\n        const raycaster = new Raycaster();\n        const mouse = new Vector2();\n\n        function updateMouse(e) {\n\n            mouse.x = ((e.pageX - domElement.offsetLeft) / domElement.offsetWidth) * 2 - 1;\n            mouse.y = -((e.pageY - domElement.offsetTop) / domElement.offsetHeight) * 2 + 1;\n\n        }\n\n        this._mouseDown = e => {\n\n            updateMouse(e);\n            raycaster.setFromCamera(mouse, this.camera);\n            this.moveRay(raycaster.ray);\n            this.setGrabbed(true);\n\n        };\n\n        this._mouseMove = e => {\n\n            updateMouse(e);\n            raycaster.setFromCamera(mouse, this.camera);\n            this.moveRay(raycaster.ray);\n\n        };\n\n        this._mouseUp = e => {\n\n            updateMouse(e);\n            raycaster.setFromCamera(mouse, this.camera);\n            this.moveRay(raycaster.ray);\n            this.setGrabbed(false);\n\n        };\n\n        domElement.addEventListener('mousedown', this._mouseDown);\n        domElement.addEventListener('mousemove', this._mouseMove);\n        domElement.addEventListener('mouseup', this._mouseUp);\n\n    }\n\n    getRevoluteDelta(joint, startPoint, endPoint) {\n\n        const { camera, initialGrabPoint } = this;\n\n        // set up the plane\n        tempVector\n            .copy(joint.axis)\n            .transformDirection(joint.matrixWorld)\n            .normalize();\n        pivotPoint\n            .set(0, 0, 0)\n            .applyMatrix4(joint.matrixWorld);\n        plane\n            .setFromNormalAndCoplanarPoint(tempVector, pivotPoint);\n\n        tempVector\n            .copy(camera.position)\n            .sub(initialGrabPoint)\n            .normalize();\n\n        // if looking into the plane of rotation\n        if (Math.abs(tempVector.dot(plane.normal)) > 0.3) {\n\n            return super.getRevoluteDelta(joint, startPoint, endPoint);\n\n        } else {\n\n            // get the up direction\n            tempVector.set(0, 1, 0).transformDirection(camera.matrixWorld);\n\n            // get points projected onto the plane of rotation\n            plane.projectPoint(startPoint, projectedStartPoint);\n            plane.projectPoint(endPoint, projectedEndPoint);\n\n            tempVector.set(0, 0, -1).transformDirection(camera.matrixWorld);\n            tempVector.cross(plane.normal);\n            tempVector2.subVectors(endPoint, startPoint);\n\n            return tempVector.dot(tempVector2);\n\n        }\n\n    }\n\n    dispose() {\n\n        const { domElement } = this;\n        domElement.removeEventListener('mousedown', this._mouseDown);\n        domElement.removeEventListener('mousemove', this._mouseMove);\n        domElement.removeEventListener('mouseup', this._mouseUp);\n\n    }\n\n}\n","import * as THREE from 'three';\nimport URDFViewer from './urdf-viewer-element.js';\nimport { PointerURDFDragControls } from './URDFDragControls.js';\n\n// urdf-manipulator element\n// Displays a URDF model that can be manipulated with the mouse\n\n// Events\n// joint-mouseover: Fired when a joint is hovered over\n// joint-mouseout: Fired when a joint is no longer hovered over\n// manipulate-start: Fires when a joint is manipulated\n// manipulate-end: Fires when a joint is done being manipulated\nexport default\nclass URDFManipulator extends URDFViewer {\n\n    static get observedAttributes() {\n\n        return ['highlight-color', ...super.observedAttributes];\n\n    }\n\n    get disableDragging() { return this.hasAttribute('disable-dragging'); }\n    set disableDragging(val) { val ? this.setAttribute('disable-dragging', !!val) : this.removeAttribute('disable-dragging'); }\n\n    get highlightColor() { return this.getAttribute('highlight-color') || '#FFFFFF'; }\n    set highlightColor(val) { val ? this.setAttribute('highlight-color', val) : this.removeAttribute('highlight-color'); }\n\n    constructor(...args) {\n\n        super(...args);\n\n        // The highlight material\n        this.highlightMaterial =\n            new THREE.MeshPhongMaterial({\n                shininess: 10,\n                color: this.highlightColor,\n                emissive: this.highlightColor,\n                emissiveIntensity: 0.25,\n            });\n\n        const isJoint = j => {\n\n            return j.isURDFJoint && j.jointType !== 'fixed';\n\n        };\n\n        // Highlight the link geometry under a joint\n        const highlightLinkGeometry = (m, revert) => {\n\n            const traverse = c => {\n\n                // Set or revert the highlight color\n                if (c.type === 'Mesh') {\n\n                    if (revert) {\n\n                        c.material = c.__origMaterial;\n                        delete c.__origMaterial;\n\n                    } else {\n\n                        c.__origMaterial = c.material;\n                        c.material = this.highlightMaterial;\n\n                    }\n\n                }\n\n                // Look into the children and stop if the next child is\n                // another joint\n                if (c === m || !isJoint(c)) {\n\n                    for (let i = 0; i < c.children.length; i++) {\n\n                        const child = c.children[i];\n                        if (!child.isURDFCollider) {\n\n                            traverse(c.children[i]);\n\n                        }\n\n                    }\n\n                }\n\n            };\n\n            traverse(m);\n\n        };\n\n        const el = this.renderer.domElement;\n\n        const dragControls = new PointerURDFDragControls(this.scene, this.camera, el);\n        dragControls.onDragStart = joint => {\n\n            this.dispatchEvent(new CustomEvent('manipulate-start', { bubbles: true, cancelable: true, detail: joint.name }));\n            this.controls.enabled = false;\n            this.redraw();\n\n        };\n        dragControls.onDragEnd = joint => {\n\n            this.dispatchEvent(new CustomEvent('manipulate-end', { bubbles: true, cancelable: true, detail: joint.name }));\n            this.controls.enabled = true;\n            this.redraw();\n\n        };\n        dragControls.updateJoint = (joint, angle) => {\n\n            this.setJointValue(joint.name, angle);\n\n        };\n        dragControls.onHover = joint => {\n\n            highlightLinkGeometry(joint, false);\n            this.dispatchEvent(new CustomEvent('joint-mouseover', { bubbles: true, cancelable: true, detail: joint.name }));\n            this.redraw();\n\n        };\n        dragControls.onUnhover = joint => {\n\n            highlightLinkGeometry(joint, true);\n            this.dispatchEvent(new CustomEvent('joint-mouseout', { bubbles: true, cancelable: true, detail: joint.name }));\n            this.redraw();\n\n        };\n\n        this.dragControls = dragControls;\n\n    }\n\n    disconnectedCallback() {\n\n        super.disconnectedCallback();\n        this.dragControls.dispose();\n\n    }\n\n    attributeChangedCallback(attr, oldval, newval) {\n\n        super.attributeChangedCallback(attr, oldval, newval);\n\n        switch (attr) {\n\n            case 'highlight-color':\n                this.highlightMaterial.color.set(this.highlightColor);\n                this.highlightMaterial.emissive.set(this.highlightColor);\n                break;\n\n        }\n\n    }\n\n};\n"],"names":["Vector3","Plane","Raycaster","Vector2","THREE"],"mappings":"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"}